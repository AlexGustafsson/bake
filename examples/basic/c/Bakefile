// Import the standard libray
import (
  "github.com/AlexGustafsson/bake/stdlib/c"
)

// Default to building the main application
.phony build {
  in main
}

// Build a static library for lib.c using standard library functions
lib.so : c::static_library {
  in lib.c lib.h
}

// Build the main application
main {
  in main.c, lib.so
  shell gcc -o $@ $<
}

// Delete any output files
.phony clean {
  shell rm lib.o lib.so main &>/dev/null || true
}
